(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7322:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>o});var l=t(5155),a=t(2115),s=t(2834),n=t(5704);function o(){let[e,r]=(0,a.useState)(null),[t,o]=(0,a.useState)(!1),[i,c]=(0,a.useState)(""),[d,p]=(0,a.useState)("1"),[u,x]=(0,a.useState)(!1),[m,h]=(0,a.useState)(""),[b,g]=(0,a.useState)(0),[f,v]=(0,a.useState)(0),[y,j]=(0,a.useState)(0),N=(0,a.useRef)(null),w=(0,a.useRef)(0),k=async()=>{if(!e)return;let r=new AbortController;N.current=r,o(!0),g(0),v(0),j(0),w.current=Date.now();let t=new FormData;t.append("file",e),t.append("expiresIn",d);let l=setInterval(()=>{let r=(Date.now()-w.current)/1e3,t=Math.min(95,r/(e.size/1048576)*100);g(t);let l=t/100*e.size;j(l),v(l/r)},500);try{let e=n.env.NEXT_PUBLIC_WORKER_URL||"https://flash-share-upload-worker.pierre-baconnier.workers.dev",a=await fetch("".concat(e,"/upload"),{method:"POST",body:t,signal:r.signal});if(clearInterval(l),a.ok){let e=await a.json(),r="".concat(window.location.origin,"/share?id=").concat(e.id);c(r),g(100)}else alert("Erreur lors de l'upload")}catch(e){clearInterval(l),"AbortError"===e.name?(console.log("Upload annul\xe9 par l'utilisateur"),alert("Upload annul\xe9")):(console.error("Upload error:",e),alert("Erreur lors de l'upload"))}finally{clearInterval(l),o(!1),g(0),v(0),j(0),N.current=null}},D=async()=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(i),alert("Lien copi\xe9 dans le presse-papier!");else{let e=document.createElement("textarea");e.value=i,e.style.position="fixed",e.style.left="-999999px",document.body.appendChild(e),e.select();try{document.execCommand("copy"),alert("Lien copi\xe9 dans le presse-papier!")}catch(e){console.error("Erreur lors de la copie:",e),alert("Impossible de copier automatiquement. Veuillez copier manuellement le lien.")}document.body.removeChild(e)}}catch(e){console.error("Erreur lors de la copie:",e),alert("Impossible de copier automatiquement. Veuillez copier manuellement le lien.")}};return(0,l.jsxs)("main",{className:"container mx-auto px-4 py-16 max-w-2xl relative z-10",children:[(0,l.jsxs)("div",{className:"glass-dark rounded-2xl neon-glow p-8",children:[(0,l.jsx)("h1",{className:"text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-cyan-400 to-purple-400 mb-2 text-center neon-text",children:"⚡ FLASH SHARE ⚡"}),(0,l.jsx)("p",{className:"text-cyan-300 text-center mb-8 text-lg",children:"Partage simplement tes fichiers avec des liens qui expirent automatiquement"}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-purple-300 mb-2",children:"\uD83D\uDCC1 S\xe9lectionnez un fichier"}),(0,l.jsx)("input",{type:"file",onChange:e=>{if(e.target.files&&e.target.files[0]){let t=e.target.files[0];r(t),c(""),x(!1);let l=t.name.toLowerCase().endsWith(".mkv"),a=t.type.startsWith("video/"),s=t.size>0x40000000;s&&a?(h("Votre vid\xe9o (".concat((t.size/1024/1024/1024).toFixed(2)," GB) d\xe9passe la limite de 1 GB. ")+"Utilisez HandBrake pour la compresser et r\xe9duire sa taille jusqu'\xe0 80% sans perte de qualit\xe9 visible."),x(!0)):s?(h("Votre fichier (".concat((t.size/1024/1024/1024).toFixed(2)," GB) d\xe9passe la limite de 1 GB.")),x(!0)):l&&(h("Fichier MKV d\xe9tect\xe9. HandBrake peut le convertir en MP4 (meilleure compatibilit\xe9) ou en MP3 si vous voulez juste l'audio."),x(!0))}},className:"block w-full text-sm text-cyan-300 file:mr-4 file:py-3 file:px-6 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-purple-600/30 file:text-cyan-300 hover:file:bg-purple-500/40 file:neon-glow cursor-pointer border border-purple-500/30 rounded-lg p-2 bg-black/30",accept:".jpg,.jpeg,.png,.gif,.webp,.svg,.mp4,.webm,.mov,.pdf,.txt,.mp3,.wav"}),e&&(0,l.jsxs)("p",{className:"mt-2 text-sm text-cyan-200",children:["Fichier s\xe9lectionn\xe9: ",(0,l.jsx)("span",{className:"font-semibold text-purple-300",children:e.name})," (",(0,l.jsxs)("span",{className:"text-cyan-400",children:[(e.size/1024/1024).toFixed(2)," MB"]}),")"]})]}),u&&(0,l.jsx)("div",{className:"bg-purple-900/30 border-2 border-purple-500/50 rounded-lg p-4 neon-glow",children:(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)("svg",{className:"w-6 h-6 text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("h4",{className:"text-sm font-semibold text-cyan-300 mb-1",children:"\uD83D\uDCA1 Astuce : Utilisez HandBrake"}),(0,l.jsx)("p",{className:"text-sm text-purple-200 mb-3",children:m}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,l.jsxs)("a",{href:"https://handbrake.fr/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-cyan-600 text-white text-sm font-medium rounded-lg hover:from-purple-500 hover:to-cyan-500 transition-all neon-glow-cyan",children:[(0,l.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"T\xe9l\xe9charger HandBrake (gratuit)"]}),(0,l.jsx)("button",{onClick:()=>x(!1),className:"px-4 py-2 text-sm text-cyan-300 hover:text-cyan-100 font-medium border border-cyan-500/50 rounded-lg hover:border-cyan-400",children:"Continuer quand m\xeame"})]}),(0,l.jsx)("p",{className:"text-xs text-purple-300 mt-2",children:"HandBrake est gratuit, open-source et disponible sur Windows, Mac et Linux"})]})]})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-purple-300 mb-2",children:"⏱️ Dur\xe9e de validit\xe9 du lien"}),(0,l.jsxs)("select",{value:d,onChange:e=>p(e.target.value),className:"block w-full px-4 py-3 border border-purple-500/50 rounded-lg bg-black/30 text-cyan-300 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 neon-glow transition-all",children:[(0,l.jsx)("option",{value:"1",className:"bg-gray-900",children:"⚡ 1 heure"}),(0,l.jsx)("option",{value:"6",className:"bg-gray-900",children:"\uD83D\uDD50 6 heures"}),(0,l.jsx)("option",{value:"24",className:"bg-gray-900",children:"\uD83D\uDCC5 24 heures"}),(0,l.jsx)("option",{value:"72",className:"bg-gray-900",children:"\uD83D\uDCC6 3 jours"}),(0,l.jsx)("option",{value:"168",className:"bg-gray-900",children:"\uD83D\uDDD3️ 1 semaine"})]})]}),t?(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)("div",{className:"w-full bg-black/50 rounded-full h-4 overflow-hidden border border-purple-500/50",children:(0,l.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-cyan-600 h-full transition-all duration-300 neon-glow",style:{width:"".concat(b,"%")}})}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-3 text-sm",children:[(0,l.jsxs)("div",{className:"bg-purple-900/20 border border-purple-500/30 rounded-lg p-3 text-center",children:[(0,l.jsx)("div",{className:"text-purple-300 text-xs mb-1",children:"Vitesse"}),(0,l.jsx)("div",{className:"text-cyan-300 font-bold",children:f>=1048576?"".concat((f/1048576).toFixed(2)," MB/s"):"".concat((f/1024).toFixed(2)," KB/s")})]}),(0,l.jsxs)("div",{className:"bg-purple-900/20 border border-purple-500/30 rounded-lg p-3 text-center",children:[(0,l.jsx)("div",{className:"text-purple-300 text-xs mb-1",children:"Progression"}),(0,l.jsxs)("div",{className:"text-cyan-300 font-bold",children:[b.toFixed(0),"%"]})]}),(0,l.jsxs)("div",{className:"bg-purple-900/20 border border-purple-500/30 rounded-lg p-3 text-center",children:[(0,l.jsx)("div",{className:"text-purple-300 text-xs mb-1",children:"Upload\xe9"}),(0,l.jsx)("div",{className:"text-cyan-300 font-bold",children:y>=1048576?"".concat((y/1048576).toFixed(1)," MB"):"".concat((y/1024).toFixed(1)," KB")})]})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("div",{className:"flex-1 bg-purple-900/30 border border-cyan-500/50 text-cyan-300 py-4 px-6 rounded-lg font-semibold text-lg text-center neon-glow-cyan",children:(0,l.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,l.jsxs)("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,l.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,l.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Upload en cours..."]})}),(0,l.jsx)("button",{onClick:()=>{N.current&&N.current.abort()},className:"px-6 py-4 bg-red-600/80 border border-red-500 text-white rounded-lg font-semibold hover:bg-red-500 transition-all neon-glow whitespace-nowrap",children:"❌ Annuler"})]})]}):(0,l.jsx)("button",{onClick:k,disabled:!e,className:"w-full bg-gradient-to-r from-purple-600 to-cyan-600 text-white py-4 px-6 rounded-lg font-semibold text-lg hover:from-purple-500 hover:to-cyan-500 disabled:from-gray-700 disabled:to-gray-800 disabled:cursor-not-allowed transition-all glow-pulse",children:"⚡ G\xc9N\xc9RER LE LIEN ⚡"}),i&&(0,l.jsxs)("div",{className:"mt-6 p-6 bg-gradient-to-r from-purple-900/40 to-cyan-900/40 rounded-lg border-2 border-cyan-500/50 neon-glow-cyan",children:[(0,l.jsx)("h3",{className:"font-semibold text-cyan-300 mb-4 text-xl neon-text-cyan",children:"✨ Lien de partage g\xe9n\xe9r\xe9! ✨"}),(0,l.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 items-center",children:[(0,l.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md neon-glow",children:[(0,l.jsx)(s.h,{value:i,size:180,level:"H",includeMargin:!0,fgColor:"#8b5cf6"}),(0,l.jsx)("p",{className:"text-xs text-gray-700 text-center mt-2 font-semibold",children:"\uD83D\uDCF1 Scannez pour partager"})]}),(0,l.jsxs)("div",{className:"flex-1 w-full",children:[(0,l.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,l.jsx)("input",{type:"text",value:i,readOnly:!0,className:"flex-1 px-4 py-2 bg-black/40 border border-cyan-500/50 rounded-lg text-sm text-cyan-200"}),(0,l.jsx)("button",{onClick:D,className:"px-6 py-2 bg-gradient-to-r from-cyan-600 to-purple-600 text-white rounded-lg hover:from-cyan-500 hover:to-purple-500 transition-all font-medium whitespace-nowrap neon-glow",children:"\uD83D\uDCCB Copier"})]}),(0,l.jsxs)("p",{className:"text-sm text-purple-200",children:["⏱️ Ce lien expirera dans ",(0,l.jsx)("span",{className:"text-cyan-300 font-bold",children:"1"===d?"1 heure":"6"===d?"6 heures":"24"===d?"24 heures":"72"===d?"3 jours":"1 semaine"})]}),(0,l.jsx)("p",{className:"text-xs text-cyan-400 mt-2",children:"\uD83D\uDCA1 Utilisez le QR code pour partager facilement sur mobile"})]})]})]})]})]}),(0,l.jsxs)("div",{className:"mt-8 text-center text-purple-300 text-sm space-y-2",children:[(0,l.jsxs)("p",{className:"flex items-center justify-center gap-2",children:[(0,l.jsx)("span",{className:"text-cyan-400",children:"⚡"}),"Les fichiers sont automatiquement supprim\xe9s apr\xe8s expiration",(0,l.jsx)("span",{className:"text-cyan-400",children:"⚡"})]}),(0,l.jsxs)("p",{className:"text-cyan-400/60 text-xs",children:["\xa9 ",new Date().getFullYear()," ",(0,l.jsx)("a",{href:"https://github.com/pbackz/tmp_share_media_srv_kkk",target:"_blank",rel:"noopener noreferrer",className:"hover:text-cyan-400 transition-colors underline",children:"pbackz"})]})]})]})}},7527:(e,r,t)=>{Promise.resolve().then(t.bind(t,7322))}},e=>{e.O(0,[834,441,255,358],()=>e(e.s=7527)),_N_E=e.O()}]);